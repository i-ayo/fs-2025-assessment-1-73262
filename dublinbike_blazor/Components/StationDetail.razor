@using dublinbike_blazor.Models
@using dublinbike_blazor.Services
@using Microsoft.AspNetCore.Components.QuickGrid
@inject StationsApiClient Api


<div class="detail card shadow-sm" @if="Station == null">hidden</div>

@if (Station != null)
{
    <div class="detail card shadow-sm">
        <h2>@Station.Name</h2>
        <p class="text-muted">@Station.Address</p>

        <span class="badge @(Station.Status == "OPEN" ? "open" : "closed")"
              aria-label="Station status">
            @Station.Status
        </span>

        <label>Occupancy</label>
        <div class="progress">
            <div class="progress-bar" style="width:@Station.Occupancy%">
            </div>
        </div>
        <span aria-label="occupancy">@Station.Occupancy% full</span>

        <p>Bikes: @Station.AvailableBikes</p>
        <p>Stands: @Station.AvailableBikeStands</p>
        <p>Total: @Station.BikeStands</p>
        <p>Updated: @Station.LastUpdateLocal.ToLocalTime().ToString("g")</p>

        <a class="btn-link" href="https://maps.google.com/?q=@Station.Lat,@Station.Lng"
           target="_blank" rel="noopener">View on Map</a>
    </div>
}

@code {
    [Parameter] public BikeStation? Station { get; set; }
}
